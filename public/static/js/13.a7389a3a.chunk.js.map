{"version":3,"sources":["routes/Admin/Discount/service/index.js","routes/Admin/Discount/model/index.js","utils/pageHelper/index.js","utils/methodRequest.js","routes/Admin/Product/service/index.js"],"names":["requestFormat","payload","length","categories","brands","getList_DISCOUNT","a","axios","get","params","PageHelper","data","map","item","moment","key","responseFormat","save_DISCOUNT","post","message","config","notice","success","update_DISCOUNT","put","id","delete_DISCOUNT","index","delete","patch_DISCOUNT","patch","url","modelEnhance","namespace","state","pageData","create","categorys","subscriptions","setup","dispatch","history","listen","pathname","search","setTimeout","URLToArray","type","effects","init","select","discount","setPage","getPageInfo","call","save","values","remove","records","getCategory","get_CATEGORY","getBrand","get_BRAND","reducers","pageInfo","pageHelper","resp","_request","_pairs","substring","indexOf","split","i","_pair","decodeURIComponent","PageInfo","handGetParent","findChildren","children","push","newData","handPostParent","value","oldData","loop","array","parentId","dataRequest","method","getList_PRODUCT","save_PRODUCT","update_PRODUCT","delete_PRODUCT","patch_PRODUCT","change_CATEGORY","delete_CATEGORY","get_ATTRIBUTE","change_ATTRIBUTE","delete_ATTRIBUTE","change_BRAND","delete_BRAND","change_PRODUCT_ATTRIBUTE","arrayId","concat","filter","self","attributes_ids","delete_PRODUCT_ATTRIBUTE","check_slug","obj"],"mappings":"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","file":"static/js/13.a7389a3a.chunk.js","sourcesContent":["import axios from 'axios';\nimport PageHelper from '@/utils/pageHelper';\nimport config from '@/config';\nimport moment from 'moment';\n\nconst requestFormat = (payload) => {\n  payload[\"start_at\"] = payload[\"date_range\"][0];\n  payload[\"end_at\"] = payload[\"date_range\"][1];\n  if ((payload[\"categories\"] && payload[\"categories\"].length > 0) || (payload[\"brands\"] && payload[\"brands\"].length > 0)) {\n    payload[\"condition\"] = {\n      categories: payload[\"categories\"] && payload[\"categories\"].length > 0 ? payload[\"categories\"] : null,\n      brands: payload[\"brands\"] && payload[\"brands\"].length > 0 ? payload[\"brands\"] : null,\n    }\n  } else payload[\"condition\"] = null\n  return payload;\n}\n\nexport const getList_DISCOUNT = async (payload) => {\n  const { data } = await axios.get('/discount', {params: PageHelper.requestFormat(payload)});\n  data.data.map((item) => {\n    item[\"date_range\"] = [moment(item[\"start_at\"]),moment(item[\"end_at\"])]\n    if (!!item[\"condition\"]) {\n      for(let key in item[\"condition\"]) {\n        item[key] = item[\"condition\"][key];\n      }\n    }\n    return item;\n  })\n  return PageHelper.responseFormat(data);\n}\nexport const save_DISCOUNT = async (payload) => {\n  payload = requestFormat(payload);\n  const { data } = await axios.post('/discount', payload);\n  if (data.message) config.notice.success(data.message);\n  return data;\n}\nexport const update_DISCOUNT = async (payload) => {\n  payload = requestFormat(payload);\n  const { data } = await axios.put('/discount/' + payload.id, payload);\n  if (data.message) config.notice.success(data.message);\n  return data;\n}\nexport const delete_DISCOUNT = async (payload) => {\n  for (let index = 0; index < payload.length; index++) {\n    const id = payload[index];\n    const {data} = await axios.delete('/discount/' + id);\n    if (data.message) config.notice.success(data.message);\n  }\n  return null;\n}\nexport const patch_DISCOUNT = async (payload) => {\n  for (let index = 0; index < payload.length; index++) {\n    const {data} = await axios.patch('/discount/' + payload[index].id, payload[index]);\n    if (data.message) config.notice.success(data.message);\n  }\n  return null;\n}\n","import modelEnhance from '@/utils/modelEnhance';\nimport PageHelper from '@/utils/pageHelper';\n\nimport {\n  get_CATEGORY,\n  get_BRAND,\n} from '@/routes/Admin/Product/service';\n\n\nimport {\n  getList_DISCOUNT,\n  save_DISCOUNT,\n  update_DISCOUNT,\n  delete_DISCOUNT,\n  patch_DISCOUNT,\n} from \"../service\"\n\n\n/**\n* true when the page is first loaded\n* Can use this value to prevent switching pages when\n* Initialize data multiple times\n*/\nlet url = true;\nexport default modelEnhance({\n  namespace: 'discount',\n\n  state: {\n    pageData: PageHelper.create(),\n    categorys: [],\n    brands: [],\n  },\n\n  subscriptions: {\n    setup({ dispatch, history }) {\n      history.listen(({ pathname, search }) => {\n        if (pathname === '/discount' && !!search && url) {\n          url = false\n          setTimeout(() => url = true, 500);\n          const payload = PageHelper.URLToArray(search);\n          dispatch({ type: 'init', payload });\n        }\n      });\n    }\n  },\n\n  effects: {\n    // Enter page load\n    *init({ payload }, { put, select }) {\n      const { pageData } = yield select(state => state.discount);\n      yield put({\n        type: 'getPageInfo',\n        payload: {\n          pageData: pageData.setPage(payload)\n        }\n      });\n      yield put({ type: 'getCategory' });\n      yield put({ type: 'getBrand' });\n    },\n    // Get paging data\n    *getPageInfo({ payload }, { call }) {\n      const { pageData } = payload;\n      const data = yield call (getList_DISCOUNT, pageData)\n      pageData.setPage(data);\n    },\n    // Save after querying paging\n    *save({ payload }, { put, select, call }) {\n      const { values, success } = payload;\n      const { pageData } = yield select(state => state.discount);\n\n      if (values.id) yield call(update_DISCOUNT, values);\n      else yield call(save_DISCOUNT, values);\n\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n      success();\n    },\n    // Delete after querying paging\n    *remove({ payload }, { put, select, call }) {\n      const { records, success } = payload;\n      const { pageData } = yield select(state => state.discount);\n      const data = records.map(item => item.id)\n      yield call(delete_DISCOUNT, data);\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n      success();\n    },\n    *patch({ payload }, { select, call, put }) {\n      const { records } = payload;\n      const { pageData } = yield select(state => state.discount);\n      yield call(patch_DISCOUNT, records);\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n    },\n\n    *getCategory({ payload }, { call, put }) {\n      const data = yield call(get_CATEGORY)\n      yield put({ type: 'success', payload: data });\n    },\n    *getBrand({ payload }, { call, put }) {\n      const data = yield call(get_BRAND)\n      yield put({ type: 'success', payload: data });\n    },\n  },\n\n  reducers: {\n    success(state, { payload }) {\n      return {\n        ...state,\n        ...payload,\n      };\n    },\n  }\n});\n","import PageInfo from './PageInfo';\nimport config from '@/config';\n\n/**\n * Universal paging assistant\n */\nexport default class　PageHelper {\n  static create = () => {\n    const pageInfo = new PageInfo();\n    return pageInfo;\n  }\n\n  /**\n   * You can format the parameters sent to the backend by setting this function\n   * \n   * For example, the parameters required by the back-end paging interface are\n   * {\n   *    currentPage: 1, \n   *    showCount: 10, \n   *    paramMap: {name: 'jonn'}\n   * }\n   * The paging information can be formatted by setting this parameter\n   * E.g:\n   * pageHelper.requestFormat(({pageNum, pageSize}) => ({\n   *  currentPage: pageNum,\n   *  showCount: pageSize\n   * }))\n  */\n  static requestFormat(pageInfo) {\n    return config.pageHelper.requestFormat(pageInfo);\n  };\n   \n\n  /**\n   * Format the data returned from the server and place it in the PageInfo object,\n   * Prepare for the next: page\n   * Page number: pageNum;\n     Quantity per page: pageSize;\n     Current page number: size;\n     Total: total;\n     Yotal pages: totalPages;\n     Result set: list;\n   * @param {object} resp \n  */\n  static responseFormat(resp) {\n    return config.pageHelper.responseFormat(resp);\n  }\n\n  static URLToArray(url) {\n    const _request = {};\n    const _pairs = url.substring(url.indexOf('?') + 1).split('&');\n    for (var i = 0; i < _pairs.length; i++) {\n        if(!_pairs[i])\n            continue;\n        var _pair = _pairs[i].split('=');\n        _request[decodeURIComponent(_pair[0])] = decodeURIComponent(_pair[1]);\n    }\n    return _request;\n  }\n}","import axios from \"axios\";\nimport config from '@/config';\n\nexport const handGetParent = async (url, key) => {\n  const { data } = await axios.get(url);\n  const findChildren = (data, children) => {\n    if (data.children && data.children.length > 0) {\n      for (let i = 0; i < data.children.length; i++) {\n        if (data.id === children['parent_id']) {\n          data.children.push(children)\n          return data.children;\n        } else data.children[i].children = findChildren(data.children[i], children);\n      }\n      return data.children;\n    } else if (data.id === children['parent_id']) return [children];\n  }\n  const newData = []\n  for (let i = 0; i < data[key].length; i++) {\n    if (!data[key][i]['parent_id'] || data[key][i]['parent_id'] === null) {\n      data[key][i].children = [];\n      newData.push(data[key][i]);\n    } else {\n      newData[newData.length - 1].children = findChildren(newData[newData.length - 1], data[key][i]);\n    }\n  }\n  data[key] = newData\n  return data;\n}\n\nexport const handPostParent = async (url, payload) => {\n  const { value, data: oldData } = payload;\n  const loop = async (array, parentId) => {\n    for (let i = 0; i < array.length; i++) {\n      array[i]['parent_id'] = parentId;\n\n      let dataRequest = {...array[i]};\n      if (!value || value.id === array[i].id) {\n        if (!!value) dataRequest = value;\n        const method = dataRequest.id > 0 ? 'put' : 'post';\n        delete dataRequest.children;\n        const {data} = await axios[method](url + (method === 'put' ? dataRequest.id : ''), dataRequest);\n        if (data.message) config.notice.success(data.message);\n        array[i] = {...array[i] ,...data.data};\n      }\n      if (array[i].children) {\n        array[i].children = await loop(array[i].children, array[i].id);\n      }\n\n    }\n    return array;\n  }\n  return await loop(oldData, null);\n}\n\n","import axios from 'axios';\nimport PageHelper from '@/utils/pageHelper';\nimport { handGetParent, handPostParent } from '@/utils/methodRequest';\nimport config from '@/config';\n\nexport const getList_PRODUCT = async (payload) => {\n  const { data } = await axios.get('/product', {params: PageHelper.requestFormat(payload)});\n  return PageHelper.responseFormat(data);\n}\nexport const save_PRODUCT = async (payload) => {\n  const { data } = await axios.post('/product', payload);\n  if (data.message) config.notice.success(data.message);\n  return data;\n}\nexport const update_PRODUCT = async (payload) => {\n  const { data } = await axios.put('/product/' + payload.id, payload);\n  if (data.message) config.notice.success(data.message);\n  return data;\n}\nexport const delete_PRODUCT = async (payload) => {\n  for (let index = 0; index < payload.length; index++) {\n    const {data} = await axios.delete('/product/' + payload[index]);\n    if (data.message) config.notice.success(data.message);\n  }\n  return null;\n}\nexport const patch_PRODUCT = async (payload) => {\n  for (let index = 0; index < payload.length; index++) {\n    const {data} = await axios.patch('/product/' + payload[index].id, payload[index]);\n    if (data.message) config.notice.success(data.message);\n  }\n  return null;\n}\n\nexport const get_CATEGORY = async () => handGetParent(\"/category/\", \"categorys\");\nexport const change_CATEGORY = async (payload) => handPostParent('/category/', payload);\nexport const delete_CATEGORY = async (id) => {\n  const { data } = await axios.delete('/category/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\n\nexport const get_ATTRIBUTE = async () => handGetParent(\"/attribute/\", \"attributes\");\nexport const change_ATTRIBUTE = async (payload) => handPostParent('/attribute/', payload);\nexport const delete_ATTRIBUTE = async (id) => {\n  const { data } = await axios.delete('/attribute/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\n\nexport const get_BRAND = async () => handGetParent(\"/brand/\", \"brands\")\nexport const change_BRAND = async (payload) => handPostParent('/brand/', payload);\nexport const delete_BRAND = async (id) => {\n  const { data } = await axios.delete('/brand/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\n\nexport const change_PRODUCT_ATTRIBUTE = async (payload) => {\n  let arrayId = [];\n  for (let index = 0; index < payload.length; index++) {\n    const method = payload[index].id > 0 ? 'put' : 'post';\n    arrayId = arrayId.concat(payload[index][\"attributes_ids\"])\n    const {data} = await axios[method]('/product-attribute/' + (method === 'put' ? payload[index].id : ''), payload[index]);\n    if (data.message) config.notice.success(data.message);\n  }\n  arrayId = arrayId.filter((value, index, self) => self.indexOf(value) === index)\n  await axios.put('/product/' + payload[0][\"product_id\"], { attributes_ids: arrayId });\n  return null;\n}\nexport const delete_PRODUCT_ATTRIBUTE = async (id) => {\n  const { data } = await axios.delete('/product-attribute/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\nexport const check_slug = async (obj) => {\n  const { data } = await axios.post(\"/check-slug/\", obj)\n  return data.data;\n}\n"],"sourceRoot":""}