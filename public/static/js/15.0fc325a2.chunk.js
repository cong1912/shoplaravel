(this["webpackJsonpdva-boot-admin"]=this["webpackJsonpdva-boot-admin"]||[]).push([[15],{1115:function(e,t,a){},1145:function(e,t,a){"use strict";a.r(t);var r,n=a(32),o=a(14),s=a(15),l=a(20),i=a(19),m=a(0),c=a.n(m),u=a(88),d=a(416),f=a(859),p=a(837),b=a(864),g=a(834),h=a(820),I=a(162),v=a.n(I),y=a(6),M=a.n(y),w=a(393),E=(a(1115),d.a.Content),O=d.a.Footer,j=p.a.Pagination,T=Object(u.c)((function(e){return{order:e.order,loading:e.loading.models.order}}))(r=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleDelete=function(e){var t=r.state.rows;(0,r.props.dispatch)({type:"order/remove",payload:{records:e,success:function(){r.setState({rows:t.filter((function(t){return!e.some((function(e){return e.rowKey===t.rowKey}))}))})}}})},r.handlePatch=function(e){(0,r.props.dispatch)({type:"order/patch",payload:{records:e}})},r.state={record:null,visible:!1,visibleTable:!1,dataItems:g.a.create(),rows:[]},r}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props,r=a.order,o=a.loading,s=a.dispatch,l=a.history,i=a.location,m=r.pageData,u=(e=this,[{title:M.a.formatMessage(w.a.code),name:"code",tableItem:{filterType:"input",sorter:!0},formItem:{}},{title:M.a.formatMessage(w.a.fullName),name:"full_name",tableItem:{filterType:"input",sorter:!0},formItem:{}},{title:M.a.formatMessage(w.a.phoneNumber),name:"phone_number",tableItem:{filterType:"input",sorter:!0},formItem:{}},{title:M.a.formatMessage(w.a.address),name:"address",tableItem:{sorter:!0},formItem:{}},{title:M.a.formatMessage(w.a.grandTotal),name:"grand_total",tableItem:{sorter:!0,render:function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},formItem:{}},{title:M.a.formatMessage(w.a.itemCount),name:"item_count",tableItem:{sorter:!0},formItem:{}},{title:M.a.formatMessage(w.a.createdAt),name:"created_at",tableItem:{filterType:"datetime",sorter:!0,render:function(e){return v()(e).format("DD/MM/YYYY")}}},{title:M.a.formatMessage(w.a.operating),tableItem:{width:180,render:function(t,a){return c.a.createElement(p.a.Oper,null,c.a.createElement(h.default.Group,{onChange:function(t){return e.handlePatch([{status:t.target.value,id:a.id}])},value:a.status,size:"small"},c.a.createElement(h.default.Button,{disabled:"pending"!==a.status,value:"pending"},M.a.formatMessage(w.a.pending)),c.a.createElement(h.default.Button,{value:"processing"},M.a.formatMessage(w.a.processing)),c.a.createElement(h.default.Button,{value:"completed"},M.a.formatMessage(w.a.completed)),c.a.createElement(h.default.Button,{value:"decline"},M.a.formatMessage(w.a.decline))))}}}]),f=this.state,g=f.rows,I=f.record,y=f.visible,T=f.dataItems,S=f.visibleTable;(Object.keys(m.sorts).length||Object.keys(m.filters).length)&&u.map((function(e){return(m.sorts[e.name]||m.filters[e.name])&&(e.tableItem=Object(n.a)(Object(n.a)({},e.tableItem),{},{sortOrder:m.sorts[e.name],filteredValue:m.filters[e.name]})),e}));var _={loading:o,columns:u,rowKey:"id",dataItems:m,showNum:!1,isScroll:!0,selectType:"radio",selectedRowKeys:g.map((function(e){return e.id})),onChange:function(e){return l.replace(i.pathname+m.toParams(e))},onSelect:function(e,a){T.setPage({list:a[0].order_item}),t.setState({visibleTable:!0})}},B={loading:o,record:I,visible:y,columns:u,modalOpts:{width:700},onCancel:function(){t.setState({record:null,visible:!1})},onSubmit:function(e){e=I?Object(n.a)(Object(n.a)({},e),{},{id:I.id}):e,s({type:"order/save",payload:{values:e,success:function(){t.setState({record:null,visible:!1})}}})}},P={loading:o,visible:S,tableProps:{showNum:!1,pagination:!1,dataItems:T,selectType:null},width:1300,columns:[{title:M.a.formatMessage(w.a.name),name:"name",tableItem:{},formItem:{}},{title:M.a.formatMessage(w.a.attribute),name:"name_attribute",tableItem:{render:function(e){return c.a.createElement("pre",{style:{margin:0}},e)}},formItem:{}},{title:M.a.formatMessage(w.a.quantity),name:"quantity",tableItem:{},formItem:{}},{title:M.a.formatMessage(w.a.price),name:"price",tableItem:{render:function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},formItem:{}},{title:M.a.formatMessage(w.a.discountPrice),name:"discount_price",tableItem:{render:function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},formItem:{}},{title:M.a.formatMessage(w.a.total),name:"total",tableItem:{},formItem:{}}],onCancel:function(){t.setState({visibleTable:!1})}};return c.a.createElement(d.a,{className:"full-layout order-page"},c.a.createElement(E,{className:"has-footer"},c.a.createElement(p.a,_)),c.a.createElement(O,null,c.a.createElement(j,_)),c.a.createElement(b.d,P),c.a.createElement(b.c,B))}}]),a}(f.a))||r;t.default=T}}]);
//# sourceMappingURL=15.0fc325a2.chunk.js.map