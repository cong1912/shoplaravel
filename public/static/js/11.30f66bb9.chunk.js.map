{"version":3,"sources":["routes/Admin/Discount/components/columns.js","routes/Admin/Discount/components/index.js","components/Toolbar/Toolbar.js","components/Toolbar/index.js","../node_modules/antd/es/space/index.js"],"names":["formatTreeselect","array","map","item","children","length","value","id","title","name","selectable","Content","Layout","Header","Footer","Pagination","DataTable","Discount","connect","discount","loading","models","props","handleDelete","records","rows","state","dispatch","type","payload","success","setState","filter","some","jItem","rowKey","handlePatch","record","visible","this","history","location","pageData","columns","self","categorys","brands","intl","formatMessage","messages","tableItem","filterType","sorter","formItem","rules","required","message","pleaseEnterName","percentOff","min","max","pleaseEnterPercentOff","priority","dateRange","pleaseSelectDateRange","brand","dict","code","codeName","mode","category","multiple","treeData","total","render","text","replace","status","startAt","moment","format","endAt","createdAt","updatedAt","operating","width","Oper","Button","tooltip","onClick","onUpdate","className","danger","areYouSure","icon","onConfirm","delete","createColumns","Object","keys","sorts","filters","sortOrder","filteredValue","dataTableProps","dataItems","selectType","showNum","isScroll","selectedRowKeys","onChange","page","pathname","toParams","onSelect","modalFormProps","modalOpts","onCancel","onSubmit","values","Toolbar","appendLeft","Group","onAdd","addNew","disabled","e","onDelete","Modal","BaseComponent","togglePullDown","stopPropagation","preventDefault","openPullDown","prefixCls","pullDownExclude","childrenClassName","pullDown","cx","open","React","Component","defaultProps","__rest","s","t","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","spaceSize","small","middle","large","Space","_classNames","_React$useContext","ConfigContext","getPrefixCls","space","directionConfig","direction","_props$size","size","align","_props$direction","customizePrefixCls","otherProps","items","toArray","len","mergedAlign","undefined","cn","classNames","concat","_defineProperty","itemClassName","marginDirection","_extends","child","key","style"],"mappings":"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","file":"static/js/11.30f66bb9.chunk.js","sourcesContent":["import React from 'react';\nimport { Space, Popconfirm } from 'antd';\nimport moment from 'moment';\nimport intl from 'react-intl-universal';\n\nimport DataTable from 'components/DataTable';\nimport Button from 'components/Button';\n\nimport messages from './../messages';\n\nconst formatTreeselect = (array) => {\n  return array.map(item => {\n    const children = (item.children && item.children.length) ? formatTreeselect(item.children) : null;\n    return { value: item.id + \"\", title: item.name, selectable: !(item.children && item.children.length), children }\n  })\n}\n\nexport const createColumns = (self, categorys, brands) => {\n\treturn [\n    {\n      title: intl.formatMessage(messages.name),\n      name: 'name',\n      tableItem: {\n        filterType: \"input\",\n        sorter: true,\n      },\n      formItem: {\n        rules: [\n          {\n            required: true,\n            message: intl.formatMessage(messages.pleaseEnterName)\n          }\n        ]\n      },\n    },\n    {\n      title: intl.formatMessage(messages.percentOff),\n      name: 'percent_off',\n      tableItem: {\n        sorter: true,\n      },\n      formItem: {\n        min: 0,\n        max: 70,\n        type: \"number\",\n        rules: [\n          {\n            required: true,\n            message: intl.formatMessage(messages.pleaseEnterPercentOff)\n          }\n        ]\n      },\n    },\n    {\n      title: intl.formatMessage(messages.priority),\n      name: 'priority',\n      tableItem: {\n        sorter: true,\n      },\n      formItem: {\n        min: 0,\n        type: \"number\",\n      },\n    },\n    {\n      title: intl.formatMessage(messages.dateRange),\n      name: 'date_range',\n      formItem: {\n        type: \"date~\",\n        rules: [\n          {\n            required: true,\n            message: intl.formatMessage(messages.pleaseSelectDateRange)\n          }\n        ]\n      },\n    },\n    {\n      title: intl.formatMessage(messages.brand),\n      name: 'brands',\n      dict: brands.map(item => ({ code: item.id + \"\", codeName: item.name })),\n      formItem: {\n        type: 'select',\n        mode: \"multiple\",\n      },\n    },\n    {\n      title: intl.formatMessage(messages.category),\n      name: \"categories\",\n      formItem: {\n        type: \"treeselect\",\n        multiple: true,\n        treeData: formatTreeselect(categorys),\n      },\n    },\n    {\n      title: intl.formatMessage(messages.total),\n      name: 'total',\n      tableItem: {\n        sorter: true,\n        render: text => text.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n      },\n    },\n    {\n      title: intl.formatMessage(messages.status),\n      name: \"status\",\n      formItem: {\n        type: \"switch\",\n      }\n    },\n    {\n      title: intl.formatMessage(messages.startAt),\n      name: 'start_at',\n      tableItem: {\n        filterType: \"datetime\",\n        sorter: true,\n        render(text) {\n          return moment(text).format(\"DD/MM/YYYY\");\n        }\n      },\n    },\n    {\n      title: intl.formatMessage(messages.endAt),\n      name: 'end_at',\n      tableItem: {\n        filterType: \"datetime\",\n        sorter: true,\n        render(text) {\n          return moment(text).format(\"DD/MM/YYYY\");\n        }\n      },\n    },\n    {\n      title: intl.formatMessage(messages.createdAt),\n      name: 'created_at',\n      tableItem: {\n        filterType: \"datetime\",\n        sorter: true,\n        render(text) {\n          return moment(text).format(\"DD/MM/YYYY\");\n        }\n      },\n    },\n    {\n      title: intl.formatMessage(messages.updatedAt),\n      name: 'updated_at',\n      tableItem: {\n        filterType: \"datetime\",\n        sorter: true,\n        render(text) {\n          return moment(text).format(\"DD/MM/YYYY\");\n        }\n      },\n    },\n    {\n      title: intl.formatMessage(messages.operating),\n      tableItem: {\n        width: 180,\n        render: (text, record) => {\n          return (\n            <DataTable.Oper>\n              <Space>\n                <Button tooltip={intl.formatMessage(messages.priority)} onClick={() => self.onUpdate(record)}>\n                  <i className=\"las la-edit\" />\n                </Button>\n                <Button\n                  type={record.status === 0 ? \"primary\" : \"\"}\n                  danger={record.status === 0}\n                  tooltip={intl.formatMessage(messages.status)}\n                  onClick={() => self.handlePatch([{ id: record.id, status: !record.status }])}\n                >\n                  <i className={`las ${ record.status === 0 ? \"la-low-vision\" : \"la-eye\"}`} />\n                </Button>\n                <Popconfirm\n                  title={intl.formatMessage(messages.areYouSure)}\n                  icon={<i className=\"las la-question-circle\" />}\n                  onConfirm={() => self.handleDelete([record])}\n                >\n                  <Button tooltip={intl.formatMessage(messages.delete)}>\n                    <i className=\"las la-trash-alt\" />\n                  </Button>\n                </Popconfirm>\n              </Space>\n            </DataTable.Oper>\n          )\n        }\n      }\n    }\n  ]\n};\n","import React from 'react';\nimport { connect } from 'dva';\nimport { Layout, Button } from 'antd';\nimport intl from \"react-intl-universal\";\n\nimport BaseComponent from 'components/BaseComponent';\nimport Toolbar from 'components/Toolbar';\nimport DataTable from 'components/DataTable';\nimport { ModalForm, } from 'components/Modal';\n\nimport { createColumns, } from './columns';\nimport messages from './../messages';\nimport './index.less';\n\nconst { Content, Header, Footer } = Layout;\nconst { Pagination } = DataTable;\n\n@connect(({ discount, loading }) => ({\n  discount,\n  loading: loading.models.discount\n}))\nclass Discount extends BaseComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      record: null,\n      visible: false,\n\n      rows: []\n    }\n  }\n\n  handleDelete = records => {\n    const { rows } = this.state;\n    const { dispatch } = this.props;\n\n    dispatch({\n      type: 'discount/remove',\n      payload: {\n        records,\n        success: () => {\n          // If the operation is successful, exclude the deleted row in the selected row\n          this.setState({\n            rows: rows.filter(\n              item => !records.some(jItem => jItem.rowKey === item.rowKey)\n            )\n          });\n        }\n      }\n    });\n  };\n\n  handlePatch = (records) => {\n    const { dispatch } = this.props;\n    dispatch({ type: 'discount/patch', payload: { records }});\n  }\n\n  render() {\n    const { discount, loading, dispatch, history, location } = this.props;\n    const { pageData, categorys, brands } = discount;\n    const columns = createColumns(this, categorys, brands);\n    const { rows, record, visible, } = this.state;\n\n    if (Object.keys(pageData.sorts).length || Object.keys(pageData.filters).length) {\n      columns.map(item => {\n        if (pageData.sorts[item.name] || pageData.filters[item.name]) {\n          item.tableItem = {\n            ...item.tableItem,\n            sortOrder: pageData.sorts[item.name],\n            filteredValue: pageData.filters[item.name]\n          }\n        }\n        return item;\n      })\n    }\n    const dataTableProps = {\n      loading,\n      columns,\n      rowKey: 'id',\n      dataItems: pageData,\n      selectType: 'checkbox',\n      showNum: false,\n      isScroll: true,\n      selectedRowKeys: rows.map(item => item.id),\n      onChange: (page) => history.replace(location.pathname +pageData.toParams(page)),\n      onSelect: (keys, rows) => this.setState({ rows })\n    };\n    const modalFormProps = {\n      loading,\n      record,\n      visible,\n      columns,\n      modalOpts: {\n        width: 700\n      },\n      onCancel: () => {\n        this.setState({\n          record: null,\n          visible: false\n        });\n      },\n      // Add and modify will enter this method,\n      // can use the primary key or whether there is a record to distinguish the status\n      onSubmit: values => {\n        values = !record ? values : {...values, id: record.id}\n        dispatch({\n          type: 'discount/save',\n          payload: {\n            values,\n            success: () => {\n              this.setState({\n                record: null,\n                visible: false\n              });\n            }\n          }\n        });\n      }\n    };\n    return (\n      <Layout className=\"full-layout discount-page\">\n        <Header>\n          <Toolbar\n            appendLeft={\n              <Button.Group>\n                <Button type=\"primary\" icon={<i className=\"las la-plus\" />} onClick={this.onAdd}>\n                  {intl.formatMessage(messages.addNew)}\n                </Button>\n                <Button\n                  type=\"primary\"\n                  disabled={!rows.length}\n                  onClick={e => this.onDelete(rows)}\n                  icon={<i className=\"las la-trash-alt\" />}\n                >\n                  {intl.formatMessage(messages.delete)}\n                </Button>\n              </Button.Group>\n            }\n          >\n          </Toolbar>\n        </Header>\n        <Content className=\"has-footer\">\n          <DataTable {...dataTableProps} />\n        </Content>\n        <Footer>\n          <Pagination {...dataTableProps} />\n        </Footer>\n        <ModalForm {...modalFormProps} />\n      </Layout>\n    );\n  }\n}\n\nexport default Discount;\n","import React from 'react';\nimport { Button } from 'antd';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport './style/index.less';\n\nclass Toolbar extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      openPullDown: false\n    };\n  }\n\n  togglePullDown = e => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.setState({\n      openPullDown: !this.state.openPullDown\n    });\n  };\n\n  render() {\n    const {\n      prefixCls,\n      className,\n      appendLeft,\n      pullDownExclude,\n      childrenClassName,\n      children,\n      pullDown\n    } = this.props;\n\n    return (\n      <div className={cx(prefixCls, className)}>\n        <div className=\"content-box\">\n          <div className=\"top-panel\">\n            <div className=\"left-btn-div\">{appendLeft}</div>\n            <div\n              className={cx(childrenClassName, {\n                'toolbar-right-out': pullDownExclude && this.state.openPullDown\n              })}\n            >\n              {children}\n            </div>\n            <div className=\"pulldown-handle-small\">\n              {pullDown ? (\n                <Button onClick={e => this.togglePullDown(e)}>\n                  <i type={this.state.openPullDown ? 'las la-angle-up' : 'las la-angle-down'} />\n                  {this.state.openPullDown ? 'Collapse' : 'Expand'}\n                </Button>\n              ) : null}\n            </div>\n          </div>\n          {pullDown ? (\n            <div\n              className={cx('pulldown-panel', {\n                open: this.state.openPullDown\n              })}\n            >\n              <span\n                className=\"pulldown-handle\"\n                title={this.state.openPullDown ? 'Collapse' : 'Expand'}\n                onClick={e => this.togglePullDown(e)}\n              >\n                <i className={this.state.openPullDown ? 'las la-angle-up' : 'las la-angle-down'} />\n                {this.state.openPullDown ? 'Collapse' : 'Expand'}\n              </span>\n              <div className=\"pulldown-body\">{pullDown}</div>\n            </div>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nToolbar.propTypes = {\n  prefixCls: PropTypes.string,\n  appendLeft: PropTypes.node,\n  children: PropTypes.node,\n  childrenClassName: PropTypes.string,\n  pullDown: PropTypes.any,\n  pullDownExclude: PropTypes.bool\n};\n\nToolbar.defaultProps = {\n  pullDownExclude: true,\n  childrenClassName: 'toolbar-right',\n  prefixCls: 'antui-toolbar-box'\n};\n\nexport default Toolbar","import Toolbar from './Toolbar';\n\nexport default Toolbar;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport { ConfigContext } from '../config-provider';\nvar spaceSize = {\n  small: 8,\n  middle: 16,\n  large: 24\n};\n\nvar Space = function Space(props) {\n  var _classNames;\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      space = _React$useContext.space,\n      directionConfig = _React$useContext.direction;\n\n  var _props$size = props.size,\n      size = _props$size === void 0 ? (space === null || space === void 0 ? void 0 : space.size) || 'small' : _props$size,\n      align = props.align,\n      className = props.className,\n      children = props.children,\n      _props$direction = props.direction,\n      direction = _props$direction === void 0 ? 'horizontal' : _props$direction,\n      customizePrefixCls = props.prefixCls,\n      otherProps = __rest(props, [\"size\", \"align\", \"className\", \"children\", \"direction\", \"prefixCls\"]);\n\n  var items = toArray(children);\n  var len = items.length;\n\n  if (len === 0) {\n    return null;\n  }\n\n  var mergedAlign = align === undefined && direction === 'horizontal' ? 'center' : align;\n  var prefixCls = getPrefixCls('space', customizePrefixCls);\n  var cn = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(direction), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), directionConfig === 'rtl'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-align-\").concat(mergedAlign), mergedAlign), _classNames), className);\n  var itemClassName = \"\".concat(prefixCls, \"-item\");\n  var marginDirection = directionConfig === 'rtl' ? 'marginLeft' : 'marginRight';\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: cn\n  }, otherProps), items.map(function (child, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: itemClassName // eslint-disable-next-line react/no-array-index-key\n      ,\n      key: \"\".concat(itemClassName, \"-\").concat(i),\n      style: i === len - 1 ? {} : _defineProperty({}, direction === 'vertical' ? 'marginBottom' : marginDirection, typeof size === 'string' ? spaceSize[size] : size)\n    }, child);\n  }));\n};\n\nexport default Space;"],"sourceRoot":""}