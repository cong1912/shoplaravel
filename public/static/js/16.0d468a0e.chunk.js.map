{"version":3,"sources":["routes/Admin/Page/service/index.js","routes/Admin/Page/model/index.js","utils/pageHelper/index.js","utils/methodRequest.js"],"names":["getList_PAGE","payload","a","axios","get","params","PageHelper","requestFormat","data","responseFormat","save_PAGE","post","message","config","notice","success","update_PAGE","put","id","delete_PAGE","index","length","delete","get_MENU","handGetParent","change_MENU","handPostParent","delete_MENU","get_SLIDE","change_SLIDE","delete_SLIDE","url","modelEnhance","namespace","state","pageData","create","menus","pages","slides","subscriptions","setup","dispatch","history","listen","pathname","search","setTimeout","URLToArray","type","effects","init","select","page","setPage","getPageInfo","call","save","values","remove","records","map","item","getMenu","changeMenu","removeMenu","getSlide","changeSlide","removeSlide","reducers","pageInfo","pageHelper","resp","_request","_pairs","substring","indexOf","split","i","_pair","decodeURIComponent","PageInfo","key","findChildren","children","push","newData","value","oldData","loop","array","parentId","dataRequest","method"],"mappings":"2NAKaA,EAAY,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,sEACHC,IAAMC,IAAI,QAAS,CAACC,OAAQC,IAAWC,cAAcN,KADlD,uBAClBO,EADkB,EAClBA,KADkB,kBAEnBF,IAAWG,eAAeD,IAFP,2CAAH,sDAIZE,EAAS,uCAAG,WAAOT,GAAP,iBAAAC,EAAA,sEACAC,IAAMQ,KAAK,QAASV,GADpB,wBACfO,EADe,EACfA,MACCI,SAASC,IAAOC,OAAOC,QAAQP,EAAKI,SAFtB,kBAGhBJ,GAHgB,2CAAH,sDAKTQ,EAAW,uCAAG,WAAOf,GAAP,iBAAAC,EAAA,sEACFC,IAAMc,IAAI,SAAWhB,EAAQiB,GAAIjB,GAD/B,wBACjBO,EADiB,EACjBA,MACCI,SAASC,IAAOC,OAAOC,QAAQP,EAAKI,SAFpB,kBAGlBJ,GAHkB,2CAAH,sDAKXW,EAAW,uCAAG,WAAOlB,GAAP,qBAAAC,EAAA,sDAChBkB,EAAQ,EADQ,YACLA,EAAQnB,EAAQoB,QADX,wBAEjBH,EAAKjB,EAAQmB,GAFI,SAGFjB,IAAMmB,OAAO,SAAWJ,GAHtB,iBAGhBV,EAHgB,EAGhBA,MACEI,SAASC,IAAOC,OAAOC,QAAQP,EAAKI,SAJtB,OACmBQ,IADnB,gDAMlB,MANkB,4CAAH,sDASXG,EAAQ,uCAAG,sBAAArB,EAAA,+EAAYsB,YAAc,SAAU,UAApC,2CAAH,qDACRC,EAAW,uCAAG,WAAOxB,GAAP,SAAAC,EAAA,+EAAmBwB,YAAe,SAAUzB,IAA5C,2CAAH,sDACX0B,EAAW,uCAAG,WAAOT,GAAP,iBAAAhB,EAAA,sEACFC,IAAMmB,OAAO,SAAWJ,GADtB,wBACjBV,EADiB,EACjBA,MACCI,SAASC,IAAOC,OAAOC,QAAQP,EAAKI,SAFpB,kBAGlB,MAHkB,2CAAH,sDAMXgB,EAAS,uCAAG,sBAAA1B,EAAA,+EAAYsB,YAAc,UAAW,WAArC,2CAAH,qDACTK,EAAY,uCAAG,WAAO5B,GAAP,SAAAC,EAAA,+EAAmBwB,YAAe,UAAWzB,IAA7C,2CAAH,sDACZ6B,EAAY,uCAAG,WAAOZ,GAAP,iBAAAhB,EAAA,sEACHC,IAAMmB,OAAO,UAAYJ,GADtB,wBAClBV,EADkB,EAClBA,MACCI,SAASC,IAAOC,OAAOC,QAAQP,EAAKI,SAFnB,kBAGnB,MAHmB,2CAAH,sDCjBrBmB,GAAM,EACKC,sBAAa,CAC1BC,UAAW,OAEXC,MAAO,CACLC,SAAU7B,IAAW8B,SACrBC,MAAO,GACPC,MAAO,GACPC,OAAQ,IAGVC,cAAe,CACbC,MADa,YACiB,IAAtBC,EAAqB,EAArBA,SAAqB,EAAXC,QACRC,QAAO,YAA2B,IAAxBC,EAAuB,EAAvBA,SAAUC,EAAa,EAAbA,OAC1B,GAAiB,UAAbD,GAA0BC,GAAUf,EAAK,CAC3CA,GAAM,EACNgB,YAAW,kBAAMhB,GAAM,IAAM,KAC7B,IAAM9B,EAAUK,IAAW0C,WAAWF,GACtCJ,EAAS,CAAEO,KAAM,OAAQhD,kBAMjCiD,QAAS,CAENC,KAFM,yGAGgB,OADflD,EAFD,EAECA,QAAagB,EAFd,EAEcA,IAAKmC,EAFnB,EAEmBA,OAFnB,SAGsBA,GAAO,SAAAlB,GAAK,OAAIA,EAAMmB,QAH5C,OAIL,OAJK,SAGGlB,EAHH,EAGGA,SAHH,SAIClB,EAAI,CACRgC,KAAM,cACNhD,QAAS,CACPkC,SAAUA,EAASmB,QAAQrD,MAP1B,OAUL,OAVK,UAUCgB,EAAI,CAAEgC,KAAM,YAVb,QAWL,OAXK,UAWChC,EAAI,CAAEgC,KAAM,aAXb,2CAcNM,YAdM,uGAgBQ,OAFAtD,EAdR,EAcQA,QAAauD,EAdrB,EAcqBA,KAClBrB,EAAalC,EAAbkC,SAfH,SAgBcqB,EAAMxD,EAAcmC,GAhBlC,OAgBC3B,EAhBD,OAiBL2B,EAASmB,QAAQ9C,GAjBZ,0CAoBNiD,KApBM,+GAsBgB,OAFfxD,EApBD,EAoBCA,QAAagB,EApBd,EAoBcA,IAAKmC,EApBnB,EAoBmBA,OAAQI,EApB3B,EAoB2BA,KACxBE,EAAoBzD,EAApByD,OAAQ3C,EAAYd,EAAZc,QArBX,SAsBsBqC,GAAO,SAAAlB,GAAK,OAAIA,EAAMmB,QAtB5C,mBAsBGlB,EAtBH,EAsBGA,UAEJuB,EAAOxC,GAxBN,iBAwBU,OAxBV,UAwBgBsC,EAAKxC,EAAa0C,GAxBlC,gCAyBA,OAzBA,UAyBMF,EAAK9C,EAAWgD,GAzBtB,QA2BL,OA3BK,UA2BCzC,EAAI,CAAEgC,KAAM,cAAehD,QAAS,CAAEkC,cA3BvC,QA4BL,OA5BK,UA4BClB,EAAI,CAAEgC,KAAM,YA5Bb,QA6BLlC,IA7BK,2CAgCN4C,OAhCM,iHAkCgB,OAFb1D,EAhCH,EAgCGA,QAAagB,EAhChB,EAgCgBA,IAAKmC,EAhCrB,EAgCqBA,OAAQI,EAhC7B,EAgC6BA,KAC1BI,EAAqB3D,EAArB2D,QAAS7C,EAAYd,EAAZc,QAjCZ,SAkCsBqC,GAAO,SAAAlB,GAAK,OAAIA,EAAMmB,QAlC5C,OAoCL,OApCK,SAkCGlB,EAlCH,EAkCGA,SACF3B,EAAOoD,EAAQC,KAAI,SAAAC,GAAI,OAAIA,EAAK5C,MAnCjC,UAoCCsC,EAAKrC,EAAaX,GApCnB,QAqCL,OArCK,UAqCCS,EAAI,CAAEgC,KAAM,cAAehD,QAAS,CAAEkC,cArCvC,QAsCL,OAtCK,UAsCClB,EAAI,CAAEgC,KAAM,YAtCb,QAuCLlC,IAvCK,2CA0CNgD,QA1CM,qGA2CQ,OA3CR,EA0CI9D,QAAauD,EA1CjB,EA0CiBA,KAAMvC,EA1CvB,EA0CuBA,IA1CvB,SA2CcuC,EAAKjC,GA3CnB,OA4CL,OADMf,EA3CD,gBA4CCS,EAAI,CAAEgC,KAAM,UAAWhD,QAASO,IA5CjC,0CA8CNwD,WA9CM,uGA+CS,OADF/D,EA9CP,EA8COA,QAAauD,EA9CpB,EA8CoBA,KAAMvC,EA9C1B,EA8C0BA,IA9C1B,SA+CeuC,EAAK/B,EAAaxB,GA/CjC,OAgDL,OADMoC,EA/CD,gBAgDCpB,EAAI,CAAEgC,KAAM,UAAWhD,QAAS,CAAEoC,WAhDnC,0CAkDN4B,WAlDM,qGAmDL,OADYhE,EAlDP,EAkDOA,QAAauD,EAlDpB,EAkDoBA,KAAMvC,EAlD1B,EAkD0BA,IAlD1B,SAmDCuC,EAAK7B,EAAa1B,GAnDnB,OAoDL,OApDK,SAoDCgB,EAAI,CAAEgC,KAAM,YApDb,0CAuDNiB,SAvDM,qGAwDQ,OAxDR,EAuDKjE,QAAauD,EAvDlB,EAuDkBA,KAAMvC,EAvDxB,EAuDwBA,IAvDxB,SAwDcuC,EAAK5B,GAxDnB,OAyDL,OADMpB,EAxDD,gBAyDCS,EAAI,CAAEgC,KAAM,UAAWhD,QAASO,IAzDjC,0CA2DN2D,YA3DM,uGA4DS,OADDlE,EA3DR,EA2DQA,QAAauD,EA3DrB,EA2DqBA,KAAMvC,EA3D3B,EA2D2BA,IA3D3B,SA4DeuC,EAAK3B,EAAc5B,GA5DlC,OA6DL,OADMoC,EA5DD,gBA6DCpB,EAAI,CAAEgC,KAAM,UAAWhD,QAAS,CAAEoC,WA7DnC,0CA+DN+B,YA/DM,qGAgEL,OADanE,EA/DR,EA+DQA,QAAauD,EA/DrB,EA+DqBA,KAAMvC,EA/D3B,EA+D2BA,IA/D3B,SAgECuC,EAAK1B,EAAc7B,GAhEpB,OAiEL,OAjEK,SAiECgB,EAAI,CAAEgC,KAAM,aAjEb,2CAqEToB,SAAU,CACRtD,QADQ,SACAmB,EADA,GACqB,IAAZjC,EAAW,EAAXA,QACf,OAAO,2BACFiC,GACAjC,Q,wGChHUK,E,2GAsBEgE,GACnB,OAAOzD,IAAO0D,WAAWhE,cAAc+D,K,qCAenBE,GACpB,OAAO3D,IAAO0D,WAAW9D,eAAe+D,K,iCAGxBzC,GAGhB,IAFA,IAAM0C,EAAW,GACXC,EAAS3C,EAAI4C,UAAU5C,EAAI6C,QAAQ,KAAO,GAAGC,MAAM,KAChDC,EAAI,EAAGA,EAAIJ,EAAOrD,OAAQyD,IAC/B,GAAIJ,EAAOI,GAAX,CAEA,IAAIC,EAAQL,EAAOI,GAAGD,MAAM,KAC5BJ,EAASO,mBAAmBD,EAAM,KAAOC,mBAAmBD,EAAM,IAEtE,OAAON,M,KAnDUnE,EACZ8B,OAAS,WAEd,OADiB,IAAI6C,M,oKCLZzD,EAAa,uCAAG,WAAOO,EAAKmD,GAAZ,uBAAAhF,EAAA,sEACJC,IAAMC,IAAI2B,GADN,OAc3B,IAd2B,SACnBvB,EADmB,EACnBA,KACF2E,EAAe,SAAfA,EAAgB3E,EAAM4E,GAC1B,GAAI5E,EAAK4E,UAAY5E,EAAK4E,SAAS/D,OAAS,EAAG,CAC7C,IAAK,IAAIyD,EAAI,EAAGA,EAAItE,EAAK4E,SAAS/D,OAAQyD,IAAK,CAC7C,GAAItE,EAAKU,KAAOkE,EAAQ,UAEtB,OADA5E,EAAK4E,SAASC,KAAKD,GACZ5E,EAAK4E,SACP5E,EAAK4E,SAASN,GAAGM,SAAWD,EAAa3E,EAAK4E,SAASN,GAAIM,GAEpE,OAAO5E,EAAK4E,SACP,GAAI5E,EAAKU,KAAOkE,EAAQ,UAAe,MAAO,CAACA,IAElDE,EAAU,GACPR,EAAI,EAAGA,EAAItE,EAAK0E,GAAK7D,OAAQyD,IAC/BtE,EAAK0E,GAAKJ,GAAV,WAA2D,OAA9BtE,EAAK0E,GAAKJ,GAAV,UAIhCQ,EAAQA,EAAQjE,OAAS,GAAG+D,SAAWD,EAAaG,EAAQA,EAAQjE,OAAS,GAAIb,EAAK0E,GAAKJ,KAH3FtE,EAAK0E,GAAKJ,GAAGM,SAAW,GACxBE,EAAQD,KAAK7E,EAAK0E,GAAKJ,KAjBA,OAsB3BtE,EAAK0E,GAAOI,EAtBe,kBAuBpB9E,GAvBoB,2CAAH,wDA0BbkB,EAAc,uCAAG,WAAOK,EAAK9B,GAAZ,mBAAAC,EAAA,6DACpBqF,EAAyBtF,EAAzBsF,MAAaC,EAAYvF,EAAlBO,KACTiF,EAFsB,+BAAAvF,EAAA,MAEf,WAAOwF,EAAOC,GAAd,uBAAAzF,EAAA,sDACF4E,EAAI,EADF,YACKA,EAAIY,EAAMrE,QADf,oBAETqE,EAAMZ,GAAN,UAAwBa,EAEpBC,EAJK,eAIaF,EAAMZ,IACvBS,GAASA,EAAMrE,KAAOwE,EAAMZ,GAAG5D,GAL3B,wBAMDqE,IAAOK,EAAcL,GACrBM,EAASD,EAAY1E,GAAK,EAAI,MAAQ,cACrC0E,EAAYR,SARZ,UAScjF,IAAM0F,GAAQ9D,GAAkB,QAAX8D,EAAmBD,EAAY1E,GAAK,IAAK0E,GAT5E,kBASApF,EATA,EASAA,MACEI,SAASC,IAAOC,OAAOC,QAAQP,EAAKI,SAC7C8E,EAAMZ,GAAN,2BAAeY,EAAMZ,IAAOtE,EAAKA,MAX1B,YAaLkF,EAAMZ,GAAGM,SAbJ,kCAcmBK,EAAKC,EAAMZ,GAAGM,SAAUM,EAAMZ,GAAG5D,IAdpD,QAcPwE,EAAMZ,GAAGM,SAdF,eACuBN,IADvB,gDAkBJY,GAlBI,4CAFe,iEAsBfD,EAAKD,EAAS,MAtBC,mFAAH","file":"static/js/16.0d468a0e.chunk.js","sourcesContent":["import axios from 'axios';\nimport PageHelper from '@/utils/pageHelper';\nimport { handGetParent, handPostParent } from '@/utils/methodRequest';\nimport config from '@/config';\n\nexport const getList_PAGE = async (payload) => {\n  const { data } = await axios.get('/page', {params: PageHelper.requestFormat(payload)});\n  return PageHelper.responseFormat(data);\n}\nexport const save_PAGE = async (payload) => {\n  const { data } = await axios.post('/page', payload);\n  if (data.message) config.notice.success(data.message);\n  return data;\n}\nexport const update_PAGE = async (payload) => {\n  const { data } = await axios.put('/page/' + payload.id, payload);\n  if (data.message) config.notice.success(data.message);\n  return data;\n}\nexport const delete_PAGE = async (payload) => {\n  for (let index = 0; index < payload.length; index++) {\n    const id = payload[index];\n    const {data} = await axios.delete('/page/' + id);\n    if (data.message) config.notice.success(data.message);\n  }\n  return null;\n}\n\nexport const get_MENU = async () => handGetParent(\"/menu/\", \"menus\");\nexport const change_MENU = async (payload) => handPostParent('/menu/', payload);\nexport const delete_MENU = async (id) => {\n  const { data } = await axios.delete('/menu/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\n\nexport const get_SLIDE = async () => handGetParent(\"/slide/\", \"slides\");\nexport const change_SLIDE = async (payload) => handPostParent('/slide/', payload);\nexport const delete_SLIDE = async (id) => {\n  const { data } = await axios.delete('/slide/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\n","import modelEnhance from '@/utils/modelEnhance';\nimport PageHelper from '@/utils/pageHelper';\n\nimport {\n  getList_PAGE,\n  save_PAGE,\n  update_PAGE,\n  delete_PAGE,\n  get_MENU,\n  change_MENU,\n  delete_MENU,\n  get_SLIDE,\n  change_SLIDE,\n  delete_SLIDE,\n} from \"../service\"\n\n/**\n* true when the page is first loaded\n* Can use this value to prevent switching pages when\n* Initialize data multiple times\n*/\nlet url = true;\nexport default modelEnhance({\n  namespace: 'page',\n\n  state: {\n    pageData: PageHelper.create(),\n    menus: [],\n    pages: [],\n    slides: [],\n  },\n\n  subscriptions: {\n    setup({ dispatch, history }) {\n      history.listen(({ pathname, search }) => {\n        if (pathname === '/page' && !!search && url) {\n          url = false\n          setTimeout(() => url = true, 500);\n          const payload = PageHelper.URLToArray(search);\n          dispatch({ type: 'init', payload });\n        }\n      });\n    }\n  },\n\n  effects: {\n    // Enter page load\n    *init({ payload }, { put, select }) {\n      const { pageData } = yield select(state => state.page);\n      yield put({\n        type: 'getPageInfo',\n        payload: {\n          pageData: pageData.setPage(payload)\n        }\n      });\n      yield put({ type: 'getMenu' });\n      yield put({ type: 'getSlide' });\n    },\n    // Get paging data\n    *getPageInfo({ payload }, { call }) {\n      const { pageData } = payload;\n      const data = yield call (getList_PAGE, pageData)\n      pageData.setPage(data);\n    },\n    // Save after querying paging\n    *save({ payload }, { put, select, call }) {\n      const { values, success } = payload;\n      const { pageData } = yield select(state => state.page);\n\n      if (values.id) yield call(update_PAGE, values);\n      else yield call(save_PAGE, values);\n\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n      yield put({ type: 'getMenu' });\n      success();\n    },\n    // Delete after querying paging\n    *remove({ payload }, { put, select, call }) {\n      const { records, success } = payload;\n      const { pageData } = yield select(state => state.page);\n      const data = records.map(item => item.id)\n      yield call(delete_PAGE, data);\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n      yield put({ type: 'getMenu' });\n      success();\n    },\n\n    *getMenu({ payload }, { call, put }) {\n      const data = yield call(get_MENU)\n      yield put({ type: 'success', payload: data });\n    },\n    *changeMenu({ payload }, { call, put }) {\n      const menus = yield call(change_MENU, payload)\n      yield put({ type: 'success', payload: { menus } });\n    },\n    *removeMenu({ payload }, { call, put }) {\n      yield call(delete_MENU, payload);\n      yield put({ type: 'getMenu' });\n    },\n\n    *getSlide({ payload }, { call, put }) {\n      const data = yield call(get_SLIDE)\n      yield put({ type: 'success', payload: data });\n    },\n    *changeSlide({ payload }, { call, put }) {\n      const menus = yield call(change_SLIDE, payload)\n      yield put({ type: 'success', payload: { menus } });\n    },\n    *removeSlide({ payload }, { call, put }) {\n      yield call(delete_SLIDE, payload);\n      yield put({ type: 'getSlide' });\n    },\n  },\n\n  reducers: {\n    success(state, { payload }) {\n      return {\n        ...state,\n        ...payload,\n      };\n    },\n  }\n});\n","import PageInfo from './PageInfo';\nimport config from '@/config';\n\n/**\n * Universal paging assistant\n */\nexport default class　PageHelper {\n  static create = () => {\n    const pageInfo = new PageInfo();\n    return pageInfo;\n  }\n\n  /**\n   * You can format the parameters sent to the backend by setting this function\n   * \n   * For example, the parameters required by the back-end paging interface are\n   * {\n   *    currentPage: 1, \n   *    showCount: 10, \n   *    paramMap: {name: 'jonn'}\n   * }\n   * The paging information can be formatted by setting this parameter\n   * E.g:\n   * pageHelper.requestFormat(({pageNum, pageSize}) => ({\n   *  currentPage: pageNum,\n   *  showCount: pageSize\n   * }))\n  */\n  static requestFormat(pageInfo) {\n    return config.pageHelper.requestFormat(pageInfo);\n  };\n   \n\n  /**\n   * Format the data returned from the server and place it in the PageInfo object,\n   * Prepare for the next: page\n   * Page number: pageNum;\n     Quantity per page: pageSize;\n     Current page number: size;\n     Total: total;\n     Yotal pages: totalPages;\n     Result set: list;\n   * @param {object} resp \n  */\n  static responseFormat(resp) {\n    return config.pageHelper.responseFormat(resp);\n  }\n\n  static URLToArray(url) {\n    const _request = {};\n    const _pairs = url.substring(url.indexOf('?') + 1).split('&');\n    for (var i = 0; i < _pairs.length; i++) {\n        if(!_pairs[i])\n            continue;\n        var _pair = _pairs[i].split('=');\n        _request[decodeURIComponent(_pair[0])] = decodeURIComponent(_pair[1]);\n    }\n    return _request;\n  }\n}","import axios from \"axios\";\nimport config from '@/config';\n\nexport const handGetParent = async (url, key) => {\n  const { data } = await axios.get(url);\n  const findChildren = (data, children) => {\n    if (data.children && data.children.length > 0) {\n      for (let i = 0; i < data.children.length; i++) {\n        if (data.id === children['parent_id']) {\n          data.children.push(children)\n          return data.children;\n        } else data.children[i].children = findChildren(data.children[i], children);\n      }\n      return data.children;\n    } else if (data.id === children['parent_id']) return [children];\n  }\n  const newData = []\n  for (let i = 0; i < data[key].length; i++) {\n    if (!data[key][i]['parent_id'] || data[key][i]['parent_id'] === null) {\n      data[key][i].children = [];\n      newData.push(data[key][i]);\n    } else {\n      newData[newData.length - 1].children = findChildren(newData[newData.length - 1], data[key][i]);\n    }\n  }\n  data[key] = newData\n  return data;\n}\n\nexport const handPostParent = async (url, payload) => {\n  const { value, data: oldData } = payload;\n  const loop = async (array, parentId) => {\n    for (let i = 0; i < array.length; i++) {\n      array[i]['parent_id'] = parentId;\n\n      let dataRequest = {...array[i]};\n      if (!value || value.id === array[i].id) {\n        if (!!value) dataRequest = value;\n        const method = dataRequest.id > 0 ? 'put' : 'post';\n        delete dataRequest.children;\n        const {data} = await axios[method](url + (method === 'put' ? dataRequest.id : ''), dataRequest);\n        if (data.message) config.notice.success(data.message);\n        array[i] = {...array[i] ,...data.data};\n      }\n      if (array[i].children) {\n        array[i].children = await loop(array[i].children, array[i].id);\n      }\n\n    }\n    return array;\n  }\n  return await loop(oldData, null);\n}\n\n"],"sourceRoot":""}