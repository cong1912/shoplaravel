{"version":3,"sources":["routes/Admin/Product/model/index.js","utils/pageHelper/index.js","utils/methodRequest.js","routes/Admin/Product/service/index.js"],"names":["url","modelEnhance","namespace","state","pageData","PageHelper","create","categorys","brands","attributes","subscriptions","setup","dispatch","history","listen","pathname","search","setTimeout","payload","URLToArray","type","effects","init","put","select","product","setPage","getPageInfo","call","getList_PRODUCT","data","save","values","success","id","update_PRODUCT","save_PRODUCT","remove","records","map","item","delete_PRODUCT","patch","patch_PRODUCT","changeProductAttribute","change_PRODUCT_ATTRIBUTE","removeProductAttribute","delete_PRODUCT_ATTRIBUTE","getCategory","get_CATEGORY","changeCategory","change_CATEGORY","removeCategory","delete_CATEGORY","getAttribute","get_ATTRIBUTE","changeAttribute","change_ATTRIBUTE","removeAttribute","delete_ATTRIBUTE","getBrand","get_BRAND","changeBrand","change_BRAND","removeBrand","delete_BRAND","reducers","pageInfo","config","pageHelper","requestFormat","resp","responseFormat","_request","_pairs","substring","indexOf","split","i","length","_pair","decodeURIComponent","PageInfo","handGetParent","key","a","axios","get","findChildren","children","push","newData","handPostParent","value","oldData","loop","array","parentId","dataRequest","method","message","notice","params","post","index","delete","arrayId","concat","filter","self","attributes_ids","check_slug","obj"],"mappings":"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","file":"static/js/14.841aa34d.chunk.js","sourcesContent":["import modelEnhance from '@/utils/modelEnhance';\nimport PageHelper from '@/utils/pageHelper';\n\nimport {\n  getList_PRODUCT,\n  save_PRODUCT,\n  update_PRODUCT,\n  delete_PRODUCT,\n  patch_PRODUCT,\n  get_CATEGORY,\n  change_CATEGORY,\n  delete_CATEGORY,\n  get_ATTRIBUTE,\n  change_ATTRIBUTE,\n  delete_ATTRIBUTE,\n  get_BRAND,\n  change_BRAND,\n  delete_BRAND,\n  change_PRODUCT_ATTRIBUTE,\n  delete_PRODUCT_ATTRIBUTE,\n} from \"../service\"\n\n/**\n* true when the page is first loaded\n* Can use this value to prevent switching pages when\n* Initialize data multiple times\n*/\nlet url = true;\nexport default modelEnhance({\n  namespace: 'product',\n\n  state: {\n    pageData: PageHelper.create(),\n    categorys: [],\n    brands: [],\n    attributes: [],\n  },\n\n  subscriptions: {\n    setup({ dispatch, history }) {\n      history.listen(({ pathname, search }) => {\n        if (pathname === '/product' && !!search && url) {\n          url = false\n          setTimeout(() => url = true, 500);\n          const payload = PageHelper.URLToArray(search);\n          dispatch({ type: 'init', payload });\n        }\n      });\n    }\n  },\n\n  effects: {\n    // Enter page load\n    *init({ payload }, { put, select }) {\n      const { pageData } = yield select(state => state.product);\n      yield put({\n        type: 'getPageInfo',\n        payload: {\n          pageData: pageData.setPage(payload)\n        }\n      });\n      yield put({ type: 'getCategory' });\n      yield put({ type: 'getBrand' });\n      yield put({ type: 'getAttribute' });\n\n    },\n    // Get paging data\n    *getPageInfo({ payload }, { call }) {\n      const { pageData } = payload;\n      const data = yield call (getList_PRODUCT, pageData)\n      pageData.setPage(data);\n    },\n    // Save after querying paging\n    *save({ payload }, { put, select, call }) {\n      const { values, success } = payload;\n      const { pageData } = yield select(state => state.product);\n\n      if (values.id) yield call(update_PRODUCT, values);\n      else yield call(save_PRODUCT, values);\n\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n      success();\n    },\n    // Delete after querying paging\n    *remove({ payload }, { put, select, call }) {\n      const { records, success } = payload;\n      const { pageData } = yield select(state => state.product);\n      const data = records.map(item => item.id)\n      yield call(delete_PRODUCT, data);\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n      success();\n    },\n    *patch({ payload }, { select, call, put }) {\n      const { records } = payload;\n      const { pageData } = yield select(state => state.product);\n      yield call(patch_PRODUCT, records);\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n    },\n\n    *changeProductAttribute({ payload }, { select, call, put }) {\n      const { pageData } = yield select(state => state.product);\n      yield call(change_PRODUCT_ATTRIBUTE, payload)\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n    },\n    *removeProductAttribute({ payload }, { select, call, put }) {\n      const { pageData } = yield select(state => state.product);\n      yield call(delete_PRODUCT_ATTRIBUTE, payload);\n      yield put({ type: 'getPageInfo', payload: { pageData } });\n    },\n\n    *getCategory({ payload }, { call, put }) {\n      const data = yield call(get_CATEGORY)\n      yield put({ type: 'success', payload: data });\n    },\n    *changeCategory({ payload }, { call, put }) {\n      const categorys = yield call(change_CATEGORY, payload);\n      yield put({ type: 'success', payload: { categorys } });\n    },\n    *removeCategory({ payload }, { call, put }) {\n      yield call(delete_CATEGORY, payload);\n      yield put({ type: 'getCategory' });\n    },\n\n    *getAttribute({ payload }, { call, put }) {\n      const data = yield call(get_ATTRIBUTE)\n      yield put({ type: 'success', payload: data });\n    },\n    *changeAttribute({ payload }, { call, put }) {\n      const attributes = yield call(change_ATTRIBUTE, payload)\n      yield put({ type: 'success', payload: { attributes } });\n    },\n    *removeAttribute({ payload }, { call, put }) {\n      yield call(delete_ATTRIBUTE, payload);\n      yield put({ type: 'getAttribute' });\n    },\n\n    *getBrand({ payload }, { call, put }) {\n      const data = yield call(get_BRAND)\n      yield put({ type: 'success', payload: data });\n    },\n    *changeBrand({ payload }, { call, put }) {\n      const brands = yield call(change_BRAND, payload)\n      yield put({ type: 'success', payload: { brands } });\n    },\n    *removeBrand({ payload }, { call, put }) {\n      yield call(delete_BRAND, payload);\n      yield put({ type: 'getBrand' });\n    }\n  },\n\n  reducers: {\n    success(state, { payload }) {\n      return {\n        ...state,\n        ...payload,\n      };\n    },\n  }\n});\n","import PageInfo from './PageInfo';\nimport config from '@/config';\n\n/**\n * Universal paging assistant\n */\nexport default class　PageHelper {\n  static create = () => {\n    const pageInfo = new PageInfo();\n    return pageInfo;\n  }\n\n  /**\n   * You can format the parameters sent to the backend by setting this function\n   * \n   * For example, the parameters required by the back-end paging interface are\n   * {\n   *    currentPage: 1, \n   *    showCount: 10, \n   *    paramMap: {name: 'jonn'}\n   * }\n   * The paging information can be formatted by setting this parameter\n   * E.g:\n   * pageHelper.requestFormat(({pageNum, pageSize}) => ({\n   *  currentPage: pageNum,\n   *  showCount: pageSize\n   * }))\n  */\n  static requestFormat(pageInfo) {\n    return config.pageHelper.requestFormat(pageInfo);\n  };\n   \n\n  /**\n   * Format the data returned from the server and place it in the PageInfo object,\n   * Prepare for the next: page\n   * Page number: pageNum;\n     Quantity per page: pageSize;\n     Current page number: size;\n     Total: total;\n     Yotal pages: totalPages;\n     Result set: list;\n   * @param {object} resp \n  */\n  static responseFormat(resp) {\n    return config.pageHelper.responseFormat(resp);\n  }\n\n  static URLToArray(url) {\n    const _request = {};\n    const _pairs = url.substring(url.indexOf('?') + 1).split('&');\n    for (var i = 0; i < _pairs.length; i++) {\n        if(!_pairs[i])\n            continue;\n        var _pair = _pairs[i].split('=');\n        _request[decodeURIComponent(_pair[0])] = decodeURIComponent(_pair[1]);\n    }\n    return _request;\n  }\n}","import axios from \"axios\";\nimport config from '@/config';\n\nexport const handGetParent = async (url, key) => {\n  const { data } = await axios.get(url);\n  const findChildren = (data, children) => {\n    if (data.children && data.children.length > 0) {\n      for (let i = 0; i < data.children.length; i++) {\n        if (data.id === children['parent_id']) {\n          data.children.push(children)\n          return data.children;\n        } else data.children[i].children = findChildren(data.children[i], children);\n      }\n      return data.children;\n    } else if (data.id === children['parent_id']) return [children];\n  }\n  const newData = []\n  for (let i = 0; i < data[key].length; i++) {\n    if (!data[key][i]['parent_id'] || data[key][i]['parent_id'] === null) {\n      data[key][i].children = [];\n      newData.push(data[key][i]);\n    } else {\n      newData[newData.length - 1].children = findChildren(newData[newData.length - 1], data[key][i]);\n    }\n  }\n  data[key] = newData\n  return data;\n}\n\nexport const handPostParent = async (url, payload) => {\n  const { value, data: oldData } = payload;\n  const loop = async (array, parentId) => {\n    for (let i = 0; i < array.length; i++) {\n      array[i]['parent_id'] = parentId;\n\n      let dataRequest = {...array[i]};\n      if (!value || value.id === array[i].id) {\n        if (!!value) dataRequest = value;\n        const method = dataRequest.id > 0 ? 'put' : 'post';\n        delete dataRequest.children;\n        const {data} = await axios[method](url + (method === 'put' ? dataRequest.id : ''), dataRequest);\n        if (data.message) config.notice.success(data.message);\n        array[i] = {...array[i] ,...data.data};\n      }\n      if (array[i].children) {\n        array[i].children = await loop(array[i].children, array[i].id);\n      }\n\n    }\n    return array;\n  }\n  return await loop(oldData, null);\n}\n\n","import axios from 'axios';\nimport PageHelper from '@/utils/pageHelper';\nimport { handGetParent, handPostParent } from '@/utils/methodRequest';\nimport config from '@/config';\n\nexport const getList_PRODUCT = async (payload) => {\n  const { data } = await axios.get('/product', {params: PageHelper.requestFormat(payload)});\n  return PageHelper.responseFormat(data);\n}\nexport const save_PRODUCT = async (payload) => {\n  const { data } = await axios.post('/product', payload);\n  if (data.message) config.notice.success(data.message);\n  return data;\n}\nexport const update_PRODUCT = async (payload) => {\n  const { data } = await axios.put('/product/' + payload.id, payload);\n  if (data.message) config.notice.success(data.message);\n  return data;\n}\nexport const delete_PRODUCT = async (payload) => {\n  for (let index = 0; index < payload.length; index++) {\n    const {data} = await axios.delete('/product/' + payload[index]);\n    if (data.message) config.notice.success(data.message);\n  }\n  return null;\n}\nexport const patch_PRODUCT = async (payload) => {\n  for (let index = 0; index < payload.length; index++) {\n    const {data} = await axios.patch('/product/' + payload[index].id, payload[index]);\n    if (data.message) config.notice.success(data.message);\n  }\n  return null;\n}\n\nexport const get_CATEGORY = async () => handGetParent(\"/category/\", \"categorys\");\nexport const change_CATEGORY = async (payload) => handPostParent('/category/', payload);\nexport const delete_CATEGORY = async (id) => {\n  const { data } = await axios.delete('/category/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\n\nexport const get_ATTRIBUTE = async () => handGetParent(\"/attribute/\", \"attributes\");\nexport const change_ATTRIBUTE = async (payload) => handPostParent('/attribute/', payload);\nexport const delete_ATTRIBUTE = async (id) => {\n  const { data } = await axios.delete('/attribute/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\n\nexport const get_BRAND = async () => handGetParent(\"/brand/\", \"brands\")\nexport const change_BRAND = async (payload) => handPostParent('/brand/', payload);\nexport const delete_BRAND = async (id) => {\n  const { data } = await axios.delete('/brand/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\n\nexport const change_PRODUCT_ATTRIBUTE = async (payload) => {\n  let arrayId = [];\n  for (let index = 0; index < payload.length; index++) {\n    const method = payload[index].id > 0 ? 'put' : 'post';\n    arrayId = arrayId.concat(payload[index][\"attributes_ids\"])\n    const {data} = await axios[method]('/product-attribute/' + (method === 'put' ? payload[index].id : ''), payload[index]);\n    if (data.message) config.notice.success(data.message);\n  }\n  arrayId = arrayId.filter((value, index, self) => self.indexOf(value) === index)\n  await axios.put('/product/' + payload[0][\"product_id\"], { attributes_ids: arrayId });\n  return null;\n}\nexport const delete_PRODUCT_ATTRIBUTE = async (id) => {\n  const { data } = await axios.delete('/product-attribute/' + id);\n  if (data.message) config.notice.success(data.message);\n  return null;\n}\nexport const check_slug = async (obj) => {\n  const { data } = await axios.post(\"/check-slug/\", obj)\n  return data.data;\n}\n"],"sourceRoot":""}