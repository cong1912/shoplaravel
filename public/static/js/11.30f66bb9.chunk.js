(this["webpackJsonpdva-boot-admin"]=this["webpackJsonpdva-boot-admin"]||[]).push([[11],{1114:function(e,t,a){},1143:function(e,t,a){"use strict";a.r(t);var n,r=a(32),l=a(14),o=a(15),s=a(20),i=a(19),c=a(0),m=a.n(c),u=a(88),d=a(416),p=a(191),f=a(6),g=a.n(f),h=a(859),b=a(852),y=a(837),v=a(864),E=a(922),w=a(1124),D=a(162),M=a.n(D),O=a(865),N=a(305),P=function e(t){return t.map((function(t){var a=t.children&&t.children.length?e(t.children):null;return{value:t.id+"",title:t.name,selectable:!(t.children&&t.children.length),children:a}}))},C=(a(1114),d.a.Content),j=d.a.Header,I=d.a.Footer,x=y.a.Pagination,Y=Object(u.c)((function(e){return{discount:e.discount,loading:e.loading.models.discount}}))(n=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleDelete=function(e){var t=n.state.rows;(0,n.props.dispatch)({type:"discount/remove",payload:{records:e,success:function(){n.setState({rows:t.filter((function(t){return!e.some((function(e){return e.rowKey===t.rowKey}))}))})}}})},n.handlePatch=function(e){(0,n.props.dispatch)({type:"discount/patch",payload:{records:e}})},n.state={record:null,visible:!1,rows:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.discount,n=t.loading,l=t.dispatch,o=t.history,s=t.location,i=a.pageData,c=function(e,t,a){return[{title:g.a.formatMessage(N.a.name),name:"name",tableItem:{filterType:"input",sorter:!0},formItem:{rules:[{required:!0,message:g.a.formatMessage(N.a.pleaseEnterName)}]}},{title:g.a.formatMessage(N.a.percentOff),name:"percent_off",tableItem:{sorter:!0},formItem:{min:0,max:70,type:"number",rules:[{required:!0,message:g.a.formatMessage(N.a.pleaseEnterPercentOff)}]}},{title:g.a.formatMessage(N.a.priority),name:"priority",tableItem:{sorter:!0},formItem:{min:0,type:"number"}},{title:g.a.formatMessage(N.a.dateRange),name:"date_range",formItem:{type:"date~",rules:[{required:!0,message:g.a.formatMessage(N.a.pleaseSelectDateRange)}]}},{title:g.a.formatMessage(N.a.brand),name:"brands",dict:a.map((function(e){return{code:e.id+"",codeName:e.name}})),formItem:{type:"select",mode:"multiple"}},{title:g.a.formatMessage(N.a.category),name:"categories",formItem:{type:"treeselect",multiple:!0,treeData:P(t)}},{title:g.a.formatMessage(N.a.total),name:"total",tableItem:{sorter:!0,render:function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}}},{title:g.a.formatMessage(N.a.status),name:"status",formItem:{type:"switch"}},{title:g.a.formatMessage(N.a.startAt),name:"start_at",tableItem:{filterType:"datetime",sorter:!0,render:function(e){return M()(e).format("DD/MM/YYYY")}}},{title:g.a.formatMessage(N.a.endAt),name:"end_at",tableItem:{filterType:"datetime",sorter:!0,render:function(e){return M()(e).format("DD/MM/YYYY")}}},{title:g.a.formatMessage(N.a.createdAt),name:"created_at",tableItem:{filterType:"datetime",sorter:!0,render:function(e){return M()(e).format("DD/MM/YYYY")}}},{title:g.a.formatMessage(N.a.updatedAt),name:"updated_at",tableItem:{filterType:"datetime",sorter:!0,render:function(e){return M()(e).format("DD/MM/YYYY")}}},{title:g.a.formatMessage(N.a.operating),tableItem:{width:180,render:function(t,a){return m.a.createElement(y.a.Oper,null,m.a.createElement(E.a,null,m.a.createElement(O.a,{tooltip:g.a.formatMessage(N.a.priority),onClick:function(){return e.onUpdate(a)}},m.a.createElement("i",{className:"las la-edit"})),m.a.createElement(O.a,{type:0===a.status?"primary":"",danger:0===a.status,tooltip:g.a.formatMessage(N.a.status),onClick:function(){return e.handlePatch([{id:a.id,status:!a.status}])}},m.a.createElement("i",{className:"las ".concat(0===a.status?"la-low-vision":"la-eye")})),m.a.createElement(w.a,{title:g.a.formatMessage(N.a.areYouSure),icon:m.a.createElement("i",{className:"las la-question-circle"}),onConfirm:function(){return e.handleDelete([a])}},m.a.createElement(O.a,{tooltip:g.a.formatMessage(N.a.delete)},m.a.createElement("i",{className:"las la-trash-alt"})))))}}}]}(this,a.categorys,a.brands),u=this.state,f=u.rows,h=u.record,D=u.visible;(Object.keys(i.sorts).length||Object.keys(i.filters).length)&&c.map((function(e){return(i.sorts[e.name]||i.filters[e.name])&&(e.tableItem=Object(r.a)(Object(r.a)({},e.tableItem),{},{sortOrder:i.sorts[e.name],filteredValue:i.filters[e.name]})),e}));var Y={loading:n,columns:c,rowKey:"id",dataItems:i,selectType:"checkbox",showNum:!1,isScroll:!0,selectedRowKeys:f.map((function(e){return e.id})),onChange:function(e){return o.replace(s.pathname+i.toParams(e))},onSelect:function(t,a){return e.setState({rows:a})}},k={loading:n,record:h,visible:D,columns:c,modalOpts:{width:700},onCancel:function(){e.setState({record:null,visible:!1})},onSubmit:function(t){t=h?Object(r.a)(Object(r.a)({},t),{},{id:h.id}):t,l({type:"discount/save",payload:{values:t,success:function(){e.setState({record:null,visible:!1})}}})}};return m.a.createElement(d.a,{className:"full-layout discount-page"},m.a.createElement(j,null,m.a.createElement(b.a,{appendLeft:m.a.createElement(p.a.Group,null,m.a.createElement(p.a,{type:"primary",icon:m.a.createElement("i",{className:"las la-plus"}),onClick:this.onAdd},g.a.formatMessage(N.a.addNew)),m.a.createElement(p.a,{type:"primary",disabled:!f.length,onClick:function(t){return e.onDelete(f)},icon:m.a.createElement("i",{className:"las la-trash-alt"})},g.a.formatMessage(N.a.delete)))})),m.a.createElement(C,{className:"has-footer"},m.a.createElement(y.a,Y)),m.a.createElement(I,null,m.a.createElement(x,Y)),m.a.createElement(v.c,k))}}]),a}(h.a))||n;t.default=Y},849:function(e,t,a){},852:function(e,t,a){"use strict";var n=a(14),r=a(15),l=a(20),o=a(19),s=a(0),i=a.n(s),c=a(191),m=a(1),u=a.n(m),d=(a(849),function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).togglePullDown=function(t){t.stopPropagation(),t.preventDefault(),e.setState({openPullDown:!e.state.openPullDown})},e.state={openPullDown:!1},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,n=t.className,r=t.appendLeft,l=t.pullDownExclude,o=t.childrenClassName,s=t.children,m=t.pullDown;return i.a.createElement("div",{className:u()(a,n)},i.a.createElement("div",{className:"content-box"},i.a.createElement("div",{className:"top-panel"},i.a.createElement("div",{className:"left-btn-div"},r),i.a.createElement("div",{className:u()(o,{"toolbar-right-out":l&&this.state.openPullDown})},s),i.a.createElement("div",{className:"pulldown-handle-small"},m?i.a.createElement(c.a,{onClick:function(t){return e.togglePullDown(t)}},i.a.createElement("i",{type:this.state.openPullDown?"las la-angle-up":"las la-angle-down"}),this.state.openPullDown?"Collapse":"Expand"):null)),m?i.a.createElement("div",{className:u()("pulldown-panel",{open:this.state.openPullDown})},i.a.createElement("span",{className:"pulldown-handle",title:this.state.openPullDown?"Collapse":"Expand",onClick:function(t){return e.togglePullDown(t)}},i.a.createElement("i",{className:this.state.openPullDown?"las la-angle-up":"las la-angle-down"}),this.state.openPullDown?"Collapse":"Expand"),i.a.createElement("div",{className:"pulldown-body"},m)):null))}}]),a}(i.a.Component));d.defaultProps={pullDownExclude:!0,childrenClassName:"toolbar-right",prefixCls:"antui-toolbar-box"};var p=d;t.a=p},922:function(e,t,a){"use strict";var n=a(2),r=a.n(n),l=a(5),o=a.n(l),s=a(0),i=a(1),c=a.n(i),m=a(68),u=a(62),d=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},p={small:8,middle:16,large:24};t.a=function(e){var t,a=s.useContext(u.b),n=a.getPrefixCls,l=a.space,i=a.direction,f=e.size,g=void 0===f?(null===l||void 0===l?void 0:l.size)||"small":f,h=e.align,b=e.className,y=e.children,v=e.direction,E=void 0===v?"horizontal":v,w=e.prefixCls,D=d(e,["size","align","className","children","direction","prefixCls"]),M=Object(m.a)(y),O=M.length;if(0===O)return null;var N=void 0===h&&"horizontal"===E?"center":h,P=n("space",w),C=c()(P,"".concat(P,"-").concat(E),(t={},o()(t,"".concat(P,"-rtl"),"rtl"===i),o()(t,"".concat(P,"-align-").concat(N),N),t),b),j="".concat(P,"-item"),I="rtl"===i?"marginLeft":"marginRight";return s.createElement("div",r()({className:C},D),M.map((function(e,t){return s.createElement("div",{className:j,key:"".concat(j,"-").concat(t),style:t===O-1?{}:o()({},"vertical"===E?"marginBottom":I,"string"===typeof g?p[g]:g)},e)})))}}}]);
//# sourceMappingURL=11.30f66bb9.chunk.js.map