(this["webpackJsonpdva-boot-admin"]=this["webpackJsonpdva-boot-admin"]||[]).push([[18],{1119:function(e,t,a){"use strict";a.r(t);var n=a(32),r=a(55),s=a.n(r),o=a(30),c=a(10),u=a.n(c),i=a(84),l=a.n(i),p=a(31),d=a(390),g=a(391);t.default={namespace:"login",state:{loggedIn:!1,message:"",user:{}},subscriptions:{setup:function(e){var t=e.history;e.dispatch;return t.listen((function(e){-1!==e.pathname.indexOf(Object(p.a)("Login"))&&(u.a.removeStore("user"),Object(d.a)(null,null,!0))}))}},effects:{login:s.a.mark((function e(t,a){var n,r,c,i,p,d,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,c=a.put,e.prev=2,e.next=5,r(g.a,n);case 5:if(i=e.sent,p=i.status,d=i.message,m=i.data,"success"!==p){e.next=17;break}return l.a.defaults.headers.common.Authorization=m.token,m.remember=n.remember,u.a.setStore("user",m),e.next=15,c(o.d.replace("/"));case 15:e.next=19;break;case 17:return e.next=19,c({type:"loginError",payload:{message:d}});case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(2),console.log(e.t0),e.next=26,c({type:"loginError"});case 26:case"end":return e.stop()}}),e,null,[[2,21]])})),logout:s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.put;case 1:case"end":return e.stop()}}),e)}))},reducers:{loginSuccess:function(e,t){var a=t.payload;return Object(n.a)(Object(n.a)({},e),{},{loggedIn:!0,message:"",user:a})},loginError:function(e,t){var a=t.payload;return Object(n.a)(Object(n.a)({},e),{},{loggedIn:!1,message:a.message})}}}}}]);
//# sourceMappingURL=18.fece3fb1.chunk.js.map